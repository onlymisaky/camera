!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},,function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"Camera",(function(){return v}));var r=n(0),i=n.n(r),o=n(1),a=n.n(o),u=n(3),c=n.n(u);function s(e){return null!=e&&"function"==typeof e.then&&"function"==typeof e.catch}function f(e){return function(t,n,r){return window.navigator.mediaDevices&&window.navigator.mediaDevices[e]?Object.assign(Object.assign({},r),{value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.value.apply(this,n).catch((function(t){return e.status="failure",Promise.reject(t)}))}}):Object.assign(Object.assign({},r),{value:function(){return this.status="failure",Promise.reject("当前浏览器不支持拍照！")}})}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"after";return function(n,r,i){var o=i.value;i.value=function(){for(var n=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if("after"===t){var u=o.apply(this,i);return s(u)?u.then((function(t){return n.status=e,t})).catch((function(e){return n.status="failure",Promise.reject(e)})):(this.status=e,u)}return this.status=e,o.apply(this,i)}}}var d=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},v=function(){function e(t){i()(this,e),this.video=t,this.deviceId="",this.cameraList=[],this.mediaStream=null,this.status="init",window.navigator.mediaDevices.addEventListener("devicechange",this.onDeviceChange)}return a()(e,[{key:"destroy",value:function(){this.deviceId="",this.cameraList=[],this.close(),window.navigator.mediaDevices.removeEventListener("devicechange",this.onDeviceChange)}},{key:"onDeviceChange",value:function(){this.getCameraList()}},{key:"getCameraList",value:function(){var e=this;return this.cameraList=[],window.navigator.mediaDevices.enumerateDevices().then((function(t){return e.cameraList=t.filter((function(e){return"videoinput"===e.kind})),e.cameraList}))}},{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n&&this.close(),this.deviceId=e.video.deviceId||"",window.navigator.mediaDevices.getUserMedia(e).then((function(e){return t.mediaStream=e,t.video.srcObject=t.mediaStream,t.video.play(),t.mediaStream}))}},{key:"close",value:function(){this.mediaStream&&this.mediaStream.getVideoTracks()[0].stop(),this.mediaStream=null}},{key:"md2Canvas",value:function(){var e=this.mediaStream.getVideoTracks()[0].getSettings(),t=document.createElement("canvas"),n=t.getContext("2d"),r=e.width||0,i=e.height||0,o=e.width||0,a=e.height||0;return t.width=o||0,t.height=a||0,n.drawImage(this.video,0,0,r,i,0,0,o,a),t}}]),e}();d([l("destroyed")],v.prototype,"destroy",null),d([f("enumerateDevices")],v.prototype,"getCameraList",null),d([l("ready"),f("getUserMedia")],v.prototype,"open",null),d([l("destroyed")],v.prototype,"close",null),d([l("ready"),l("busy","before")],v.prototype,"md2Canvas",null);t.default=v}])}));